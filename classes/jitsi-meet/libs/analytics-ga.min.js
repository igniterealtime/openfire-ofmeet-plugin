(()=>{"use strict";class e{constructor(e={}){this._enabled=!1,this._whiteListedEvents=e.whiteListedEvents,this._blackListedEvents=[...e.blackListedEvents||[],"e2e_rtt","rtp.stats","rtt.by.region","available.device","stream.switch.delay","ice.state.changed","ice.duration","peer.conn.status.duration"]}_extractName(e){if("page"===e.type)return e.name;const{action:t,actionSubject:s,source:i}=e;let a=t;return s&&s!==t&&(a=`${s}.${t}`),i&&i!==t&&(a=`${i}.${a}`),a}_shouldIgnore(e){if(!e||!this._enabled)return!0;const t=this._extractName(e)??"";return Array.isArray(this._whiteListedEvents)?-1===this._whiteListedEvents.indexOf(t):!!Array.isArray(this._blackListedEvents)&&-1!==this._blackListedEvents.indexOf(t)}}const t=(window.JitsiMeetJS||(window.JitsiMeetJS={}),window.JitsiMeetJS.app||(window.JitsiMeetJS.app={}),window.JitsiMeetJS.app);t.analyticsHandlers=t.analyticsHandlers||[],t.analyticsHandlers.push(class extends e{constructor(e){if(super(e),this._userProperties={},!e.googleAnalyticsTrackingId)throw new Error("Failed to initialize Google Analytics handler, no tracking ID");this._enabled=!0,this._initGoogleAnalytics(e)}_initGoogleAnalytics(e){var t,s,i,a,n,r;t=window,s=document,i="script",a="ga",t.GoogleAnalyticsObject=a,t[a]=t[a]||function(){(t[a].q=t[a].q||[]).push(arguments)},t[a].l=1*new Date,n=s.createElement(i),r=s.getElementsByTagName(i)[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(n,r),ga("create",e.googleAnalyticsTrackingId,"auto"),ga("send","pageview")}_extractValue(e){let t=e?.attributes?.value;return t=Math.round(parseFloat(t??"")),t}_extractLabel(e){const{attributes:t={}}=e,s=Object.keys(t).map((e=>`${e}=${t[e]}`));return s.push(this._userPropertiesString),s.join("&")}setUserProperties(e={}){if(!this._enabled)return;const t=["user_agent","callstats_name"];this._userPropertiesString=Object.keys(e).filter((e=>-1===t.indexOf(e))).map((t=>`permanent_${t}=${e[t]}`)).join("&")}sendEvent(e){if(this._shouldIgnore(e))return;const t={eventCategory:"jitsi-meet",eventAction:this._extractName(e),eventLabel:this._extractLabel(e)},s=this._extractValue(e);isNaN(s)||(t.eventValue=s),ga("send","event",t)}})})();
//# sourceMappingURL=analytics-ga.min.js.map