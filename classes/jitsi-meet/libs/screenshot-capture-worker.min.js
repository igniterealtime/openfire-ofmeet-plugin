(()=>{"use strict";var t={161:t=>{t.exports=function(t,o,i,f,s,c){if(!n(t)||!n(o)||i&&!n(i))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(t.length!==o.length||i&&i.length!==t.length)throw new Error("Image sizes do not match.");if(t.length!==f*s*4)throw new Error("Image data size does not match width/height.");c=Object.assign({},e,c);const d=f*s,h=new Uint32Array(t.buffer,t.byteOffset,d),g=new Uint32Array(o.buffer,o.byteOffset,d);let m=!0;for(let t=0;t<d;t++)if(h[t]!==g[t]){m=!1;break}if(m){if(i&&!c.diffMask)for(let e=0;e<d;e++)u(t,4*e,c.alpha,i);return 0}const p=35215*c.threshold*c.threshold;let w=0;for(let e=0;e<s;e++)for(let n=0;n<f;n++){const d=4*(e*f+n),h=a(t,o,d,d);Math.abs(h)>p?c.includeAA||!r(t,n,e,f,s,o)&&!r(o,n,e,f,s,t)?(i&&l(i,d,...h<0&&c.diffColorAlt||c.diffColor),w++):i&&!c.diffMask&&l(i,d,...c.aaColor):i&&(c.diffMask||u(t,d,c.alpha,i))}return w};const e={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0],diffColorAlt:null,diffMask:!1};function n(t){return ArrayBuffer.isView(t)&&1===t.constructor.BYTES_PER_ELEMENT}function r(t,e,n,r,i,f){const s=Math.max(e-1,0),c=Math.max(n-1,0),l=Math.min(e+1,r-1),u=Math.min(n+1,i-1),d=4*(n*r+e);let h,g,m,p,w=e===s||e===l||n===c||n===u?1:0,M=0,y=0;for(let o=s;o<=l;o++)for(let i=c;i<=u;i++){if(o===e&&i===n)continue;const f=a(t,t,d,4*(i*r+o),!0);if(0===f){if(w++,w>2)return!1}else f<M?(M=f,h=o,g=i):f>y&&(y=f,m=o,p=i)}return 0!==M&&0!==y&&(o(t,h,g,r,i)&&o(f,h,g,r,i)||o(t,m,p,r,i)&&o(f,m,p,r,i))}function o(t,e,n,r,o){const a=Math.max(e-1,0),i=Math.max(n-1,0),f=Math.min(e+1,r-1),s=Math.min(n+1,o-1),c=4*(n*r+e);let l=e===a||e===f||n===i||n===s?1:0;for(let o=a;o<=f;o++)for(let a=i;a<=s;a++){if(o===e&&a===n)continue;const i=4*(a*r+o);if(t[c]===t[i]&&t[c+1]===t[i+1]&&t[c+2]===t[i+2]&&t[c+3]===t[i+3]&&l++,l>2)return!0}return!1}function a(t,e,n,r,o){let a=t[n+0],l=t[n+1],u=t[n+2],d=t[n+3],h=e[r+0],g=e[r+1],m=e[r+2],p=e[r+3];if(d===p&&a===h&&l===g&&u===m)return 0;d<255&&(d/=255,a=c(a,d),l=c(l,d),u=c(u,d)),p<255&&(p/=255,h=c(h,p),g=c(g,p),m=c(m,p));const w=i(a,l,u),M=i(h,g,m),y=w-M;if(o)return y;const b=f(a,l,u)-f(h,g,m),v=s(a,l,u)-s(h,g,m),x=.5053*y*y+.299*b*b+.1957*v*v;return w>M?-x:x}function i(t,e,n){return.29889531*t+.58662247*e+.11448223*n}function f(t,e,n){return.59597799*t-.2741761*e-.32180189*n}function s(t,e,n){return.21147017*t-.52261711*e+.31114694*n}function c(t,e){return 255+(t-255)*e}function l(t,e,n,r,o){t[e+0]=n,t[e+1]=r,t[e+2]=o,t[e+3]=255}function u(t,e,n,r){const o=c(i(t[e+0],t[e+1],t[e+2]),n*t[e+3]/255);l(r,e,o,o,o)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(161),e=n.n(t);const r=1e6;let o;const a=new OffscreenCanvas(0,0),i=a.getContext("2d");let f;async function s(t){let e=await a.convertToBlob({type:"image/jpeg"});if(e.size>r){const t=.92*Number((r/e.size).toFixed(2));e=await a.convertToBlob({type:"image/jpeg",quality:t})}f=t,postMessage({id:3,imageBlob:e})}function c(){postMessage({id:3})}onmessage=function(t){switch(t.data.id){case 1:o=setTimeout((async()=>{const n=t.data.imageBitmap;n?function(t){const{height:n,width:r}=t;a.width!==r&&(a.width=r),a.height!==n&&(a.height=n),i?.drawImage(t,0,0,r,n);const o=i?.getImageData(0,0,r,n);if(t.close(),!o)return void c();if(!f||o.data.length!==f.data.length)return void s(o);let l=0;try{l=e()(o.data,f.data,null,r,n)}catch{return void c()}l/o.data.length*100>=4?s(o):c()}(n):c()}),t.data.timeMs);break;case 2:o&&clearTimeout(o)}}})()})();
//# sourceMappingURL=screenshot-capture-worker.min.js.map